<a
  [routerLink]="['/notes', note.id]"
  class="block no-underline text-inherit m-[1rem]"
  [class.w-full]="viewMode === 'list'"
>
  <div
    class="flex flex-col h-full p-5 bg-card rounded-xl border border-border hover:shadow-md transition-shadow"
  >
    <div class="flex items-center justify-between mb-3 mt-[1.6rem] mx-[1rem]">
      <span class="text-[11px] font-semibold uppercase tracking-wider text-muted-foreground">
        {{ note.category }}
      </span>
    </div>

    <h3
      class="text-sm font-semibold text-foreground mb-1.5 line-clamp-2 text-pretty mx-[1rem] mt-[1rem]"
    >
      {{ note.title }}
    </h3>

    <p
      class="text-xs text-muted-foreground mb-4 line-clamp-2 leading-relaxed flex-1 mx-[1rem] mt-[0.6rem]"
    >
      {{ note.content }}
    </p>

    <div class="flex items-center justify-between m-[1rem]">
      <div class="flex items-center gap-2 max-w-full overflow-hidden">
        <div class="flex items-center gap-1.5 overflow-hidden whitespace-nowrap max-w-full">
          @for (tag of displayedTags(); track tag.name) {
            <span
              class="inline-block max-w-[4.2rem] truncate text-[12px] font-medium rounded-full text-card bg-gray-500 px-2 py-1 mx-[0.3rem] p-[0.3rem]"
            >
              {{ tag.name }}
            </span>
          }
        </div>

        @if (hiddenCount() > 0) {
          <span class="text-[12px] text-muted-foreground font-[700] rounded-full">
            +{{ hiddenCount() }} more
          </span>
        }
      </div>

      <span class="text-[11px] text-muted-foreground whitespace-nowrap ml-2">
        {{ formatDate(note.updatedAt) }}
      </span>
    </div>
  </div>
</a>
