<div class="flex flex-col h-full">
  <header class="flex items-center gap-4 px-8 py-4 border-b border-border bg-card h-[5rem]">
    <div class="relative flex-1 max-w-xl">
      <lucide-icon
        [img]="SearchIcon"
        class="absolute left-[1rem] top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground"
      ></lucide-icon>
      <input
        type="text"
        placeholder="Search notes..."
        [ngModel]="search()"
        (ngModelChange)="search.set($event)"
        class="w-[85%] h-[1.6rem] pl-10 px-[2.4rem] py-[0.5rem] ml-[0.6rem] rounded-lg border border-border bg-background text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 transition-colors"
      />
    </div>

    <div class="flex items-center border border-border overflow-hidden mr-[1rem]">
      <button
        (click)="viewMode.set('grid')"
        [class]="
          viewMode() === 'grid'
            ? 'bg-primary text-primary-foreground'
            : 'bg-card text-muted-foreground'
        "
        class="p-2 transition-colors"
      >
        <lucide-icon [img]="GridIcon" class="w-4 h-4"></lucide-icon>
      </button>
      <button
        (click)="viewMode.set('list')"
        [class]="
          viewMode() === 'list'
            ? 'bg-primary text-primary-foreground'
            : 'bg-card text-muted-foreground'
        "
        class="p-2 transition-colors"
      >
        <lucide-icon [img]="ListIcon" class="w-4 h-4"></lucide-icon>
      </button>
    </div>

    <button
      (click)="navigateNewNote()"
      class="flex items-center gap-2 px-4 py-2 mr-[1rem] h-[2.4rem] w-[6.4rem] rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:opacity-90 transition-opacity justify-center"
    >
      <lucide-icon [img]="PlusIcon" class="w-4 h-4"></lucide-icon>
      New
    </button>
  </header>

  <div class="flex-1 p-8 overflow-y-auto">
    <!-- <div class="flex items-center justify-between mb-[1rem]">
      <h1 class="text-[1.6rem] font-bold text-foreground ml-[1rem]">Recent Notes</h1>

      <div class="flex items-center gap-2 mr-[1rem]">
        <span class="text-xs text-muted-foreground">Sort by:</span>
        <select
          [ngModel]="sortBy()"
          (ngModelChange)="sortBy.set($event)"
          class="text-xs font-[600] text-foreground bg-transparent border-none focus:outline-none cursor-pointer"
        >
          <option value="updatedAt">Last Modified</option>
          <option value="createdAt">Date Created</option>
          <option value="title">Alphabetical</option>
        </select>
      </div>
    </div> -->

    @if (isLoading()) {
      <div class="flex flex-col items-center justify-center py-20">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"></div>
        <p class="text-sm text-muted-foreground">Searching your notes...</p>
      </div>
    } @else if (note().length == 0) {
      <div class="flex flex-col items-center justify-center py-20 text-muted-foreground">
        <p class="text-sm">No notes found. Create your first note!</p>
      </div>
    } @else {
      <div
        [class]="
          viewMode() === 'grid'
            ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4'
            : 'flex flex-col gap-3'
        "
      >
        @for (note of filteredNotes(); track note.id) {
          <app-note-card [note]="note" [viewMode]="viewMode()"></app-note-card>
        }
      </div>
    }
  </div>
</div>
